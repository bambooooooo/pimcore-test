<html>
<head>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            font-size: 9px;
        }
        .page {
            width: 850px;
            height: 566px;
            position: relative;
            border: 1px solid #000;
            padding: 21px;
            box-sizing: border-box;
        }

        .content
        {
            text-align: center;
            width: 100%;
            height: 100%;
            border-collapse: collapse;
        }

        .content td
        {
            border: 1px solid #000;
            border-collapse: collapse;
            padding: 8px;
            box-sizing: border-box;
        }

        .header
        {
            font-size: 72px;
            font-weight: bold;
            word-break: keep-all;
        }

        .name
        {
            font-size: 28px;
            word-break: keep-all;
        }

        .feature
        {
            font-size: 42px;
            word-break: keep-all;
            font-weight: bold;
        }

        .detail
        {
            font-size: 18px;
            word-break: keep-all;
        }

    </style>
</head>
<body>

{% set step = max(step, 1) %}
{% set step = min(copies, step) %}
{% set steps = (copies / step)|round(0, 'ceil') %}
{% for i in range(1, steps) %}
    <div class="page">
        <table class="content">
            <tr>
                <td colspan="3">
                    <div class="header">
                        {{ package.key }}
                    </div>
                </td>
            </tr>
            <tr>
                <td colspan="3">
                    <div class="name">
                        {{ product.Name }}
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="feature">
                        {{ package.Mass }}
                    </div>
                </td>
                <td>
                    <div class="feature">
                        {% if loop.last %}
                            {% set qty = copies - (loop.index - 1) * step  %}
                        {% else %}
                            {% set qty = step %}
                        {% endif %}

                        x{{ qty }}
                    </div>
                </td>
                <td rowspan="2">
                    <div class="header">
                        {{ qty * package.Mass.Value }} kg
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="detail">
                        {{ package.barcode }}
                    </div>
                </td>
                <td>
                    <div class="detail">
                        {% if package.Carriers %}
                            {{ package.Carriers[0].element.Length }} x {{ package.Carriers[0].element.Width }}
                        {% else %}
                            -?-
                        {% endif %}
                    </div>
                </td>
            </tr>
        </table>
    </div>
{% endfor %}
</body>
</html>
