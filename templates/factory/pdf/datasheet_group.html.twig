<html>
<head>
    <title>Cennik</title>
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/smoothness/jquery-ui.css">
    <style>

        html, body
        {
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            padding: 0;
            margin: 0;
        }

        .pb
        {
            page-break-after: always;
        }

        @page {
            size: A4;
            margin: 0;
        }

        @page :first {
            margin: 0;
        }

        .page-content
        {
            padding: 10mm 10mm 0 10mm;
            box-sizing: border-box;
        }

        .table
        {
            width: 100%;
            text-align: center;
            box-sizing: border-box;
        }

        .packages-table, .set-table
        {
            width: 100%;
            text-align: center;
            border-collapse: collapse;
            border: 1px solid #cacaca;
        }

        .packages-table td, .set-table td
        {
            border: 1px solid #cacaca;
            border-collapse: collapse;
        }

        .packages-table thead tr, .set-table thead tr
        {
            background: #e5e5e5;
            padding: 4px;
            font-weight: bolder;
            font-size: 9px;
        }

        .download-button
        {
            display: inline-block;
            padding: 6px 8px;
            background: #1d9cf3;
            color: #fff;
            border-radius: 12px;
            text-align: center;
            margin-top: 12px;
        }

        .packages-table tbody tr td, .set-table tbody tr td
        {
            padding: 3px;
            font-size: 9px;
            font-weight: normal;
        }

        section
        {
            margin-bottom: 32px;
        }

        .download-button-icon
        {
            position: relative;
            top: 3px;
            height: 18px;
        }

        .page
        {
            position: relative;
            page-break-before: always;
        }

        .text-black
        {
            font-size: 14px;
            font-weight: bolder;
            color: #fff !important;
            background-color: #000;
            border-radius: 3px;
            padding: 4px;
        }

        .text-red
        {
            font-size: 14px;
            font-weight: bolder;
            color: #fff !important;
            background-color: #e42a46;
            border-radius: 3px;
            padding: 4px;
        }

    </style>
</head>
<body>

{% if "cover" == "cover" %}
    <div class="page" style="height: 100%; overflow: hidden; box-sizing: border-box;">
        <div style="height:50%; width:100%; padding: 25px 36px 32px 32px; box-sizing: border-box; position: relative">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-6">
                        <img src="{{ asset('var/assets/LOGO/megstyl.svg') }}" width="227">
                    </div>
                    <div class="col-6" style="text-align: end; font-size: 13px">
                        <div style="margin-top: 14px">
                            <strong>{{ "Date"|trans }}</strong>: {{ "now"|date("d.m.Y") }}
                        </div>
                    </div>
                </div>
                <div class="row" style="margin-top: 150px">
                    <div class="col-xs-12">
                        <div style="float: left">
                            <div style="font-size: 80px;  line-height: 72px">
                                {{ group.Name ?? group.key }}
                            </div>
                            <div style="text-align: end; font-size: 18px; position: relative; right: 6px">
                                {% if prices %}
                                    {{ "Price list" | trans }}
                                {% else %}
                                    {{ "Dataheets" | trans }}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div style="position: absolute; right: 0; top: 0; height: 92%; width: 23px; background-color: #e42a46; border-radius: 0 0 0 10px"></div>
            <div style="position: absolute; bottom: 10px; right: 26px; width: 100%">
                <div style="position: relative;">
                    <div style="float: right; text-align: left; font-size: 12px">
                        <div>
                            <strong>
                                Designed by
                            </strong>
                        </div>
                        <div>
                            <span>
                                Megstyl in Poland
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div style="height: 50%; width: 100%; position: relative">
            {% if group.Image %}
                <img src="{{ group.Image }}" style="width: 100%; height: 100%">
            {% else %}
                {{ include('factory/parts/image_placeholder.html.twig') }}
            {% endif %}
        </div>
    </div>
{% endif %}

{% if "summary"=="off" and (not prices) %}
    <div class="page" style="overflow: hidden">
        <div style="background-image: url('{{ group.Image.thumbnail("a4_center") }}'); width: 100%; height: 100%; background-position: center; background-size: cover"></div>
        <div style="position: absolute; width: 15.5cm; right: 32px; bottom: 108px; background: none; color: #fafafa; font-weight: bolder">
            {{ group.description|raw }}
        </div>
    </div>
{% endif %}

{% if "products"=="products" and (not prices) and (prods|length + common|length) > 0 %}
    <div class="page">
        <div class="page-content">
            <h1>
                {{ "Products"|trans }}
            </h1>
            <table class="table">
                <tbody>
                {% set c = 0 %}
                {% for s in common %}
                        {% if c == 0 %}
                            <tr>
                        {% endif %}
                        <td>
                            {{ include('factory/pdf/parts/_gallery_item.html.twig', {item: s}) }}
                        </td>
                        {% if c == products_row_cnt - 1 %}
                            </tr>
                        {% endif %}
                        {% set c = (c + 1) % (products_row_cnt) %}
                {% endfor %}
                </tbody>
            </table>
        </div>

    </div>
    <div class="pb"></div>
{% endif %}

{% if "sets" == "sets" and (not prices) and sets|length > 0 %}
    <div class="page">
        <div class="page-content">
            <table class="table">
                <thead>
                    <tr>
                        <td colspan="{{ sets_row_cnt }}" style="text-align: left">
                            <h1>
                                {{ "Sets"|trans }}
                            </h1>
                        </td>
                    </tr>
                </thead>
                <tbody>
                    {% set c = 0 %}

                    {% for s in sets %}
                            {% if c == 0 %}
                                <tr>
                            {% endif %}
                            <td>
                                {{ include('factory/pdf/parts/_gallery_item.html.twig', {item: s}) }}
                            </td>
                            {% if c == sets_row_cnt - 1 %}
                                </tr>
                            {% endif %}
                            {% set c = (c + 1) % (sets_row_cnt) %}
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="pb"></div>
{% endif %}

{% if "set" == "set" and (not prices) and sets|length > 0 %}
    {% for s in sets %}
        {% if s.published %}
            <article>
                <section id="{{ s.id }}">
                    <div class="page">
                        <div class="page-content">
                            {{ include('factory/pdf/parts/_item_header.html.twig', {item: s}) }}
                            {{ include('factory/pdf/parts/_packages.html.twig', {item: s}) }}
                            {{ include('factory/pdf/parts/_set_elements.html.twig', {item: s}) }}
                        </div>
                    </div>
                </section>
            </article>
            <div class="pb"></div>
        {% endif %}
    {% endfor %}
{% endif %}

{% if "item" == "item" and prices and prods|length > 0 %}
    {% set pageIdx = 2 %}
    {% for s in prods %}
        {% set pr = null %}
        {% set currency = null %}

        {% for price in s.Price %}
            {% if price.element.id == prices %}
                {% set pr = price.data.Price %}
                {% set currency = price.data.Currency %}
            {% endif %}
        {% endfor %}

        {% if s.ObjectType == 'ACTUAL' and pr %}
            <article>
                <section id="{{ s.id }}">
                    <div class="page" style="height: 100%; position: relative; padding-top: 0px; box-sizing: border-box;">
                        <div class="page-content">
                            <div style="text-align: center; max-height: 665px; height:665px; position: relative;">
                                {% if s.Image %}
                                    <img src="{{ s.Image }}" style="display: block; margin:auto; max-width: 665px; max-height: 665px; margin: 0 auto; height: 665px; width: 665px">
                                {% else %}
                                    {{ include('factory/parts/image_placeholder.html.twig') }}
                                {% endif %}
                            </div>
                            <div style="margin-top: 8px;">
                                <div style="line-height: 32px">
                                    <div>
                                        <span class="text-black">
                                            {{ "Sku"|trans }}: {{ s.key }}
                                        </span>
                                    </div>
                                    <div>
                                        <span class="text-black">
                                            {{ s.Name ?? s.id }}
                                        </span>
                                    </div>
                                    <div>
                                        <span class="text-red">
                                            {{ "Net Price"|trans }}:
                                            {{ pr }} {{ currency }}
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <div style="line-height: 16px;">
                                    <div style="font-size: 21px; font-weight: bold; letter-spacing: 3px; text-transform: uppercase" class="mt-3 mb-2">
                                        {{ "Tech data"|trans }}
                                    </div>
                                    <div style="width: 100%; border-bottom: 1px solid #212121; margin-bottom: 6px"></div>
                                    {% if s.Summary and s.Summary|striptags|length > 0 %}
                                        <div style="font-size: 13px; height: 200px; overflow: hidden;">
                                            {{ s.Summary|raw }}
                                        </div>
                                    {% else %}
                                        <div style="width: 100%; height: 200px;">
                                            {{ include('factory/parts/textarea_placeholder.html.twig') }}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div style="position: absolute; bottom: 32px; left: 0; width: 100%;">
                            <div style="position: relative; color: #212121; font-size: 12px;">
                                <div style="position: absolute; right: 32px; bottom: 4px">
                                    <span style="font-size: 11px; padding: 8px; border-radius: 6px; background: #212121; color: #fff; font-weight: bolder">
                                        {{ pageIdx }}
                                    </span>
                                </div>
                                <div style="text-align: center;">
                                    <img src="{{ asset('var/assets/LOGO/megstyl.svg') }}" width="120">
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </article>
            {% set pageIdx = pageIdx + 1 %}
        {% endif %}
    {% endfor %}
{% endif %}

{% if "item" == "item" and (not prices) and common|length > 0 %}
    {% for s in common %}
        <article>
            <section id="{{ s.id }}">
                <div class="page">
                    <div class="page-content">
                        {{ include('factory/pdf/parts/_item_header.html.twig', {item: s}) }}
                        {{ include('factory/pdf/parts/_packages.html.twig', {item: s}) }}
                        {{ include('factory/pdf/parts/_product_parameters.html.twig', {item: s}) }}
                    </div>
                </div>
            </section>
        </article>
        <div class="pb"></div>
    {% endfor %}
{% endif %}

{% if "backcover" == "backcover" and prices %}
    <div class="page" style="height: 100%; overflow: hidden">
        <div style="height:50%; width:100%; padding: 32px; position: relative">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-6">
                        <img src="{{ asset('var/assets/LOGO/megstyl.svg') }}" width="174">
                    </div>
                    <div class="col-6" style="text-align: end">

                    </div>
                </div>
            </div>
            <div style="position: absolute; bottom: 16px; left: 0; padding: 32px; width: 72%">
                <h3>
                    {{ "Attachments"|trans }}
                </h3>
                <div class="container-fluid">
                    <hr/>
                    <div class="row">
                        <div class="col-8">
                            <img src="/bundles/pimcoreadmin/img/flat-color-icons/gallery.svg" width="32"/>
                            <span class="ms-3">
                                {{ "All photos"|trans }}
                            </span>
                        </div>
                        <div class="col-4">
                            <a href="{{ path('export_images', {id: group.id}) }}" style="text-decoration: none; color: #000">
                                <img src="/bundles/pimcoreadmin/img/flat-color-icons/download-cloud.svg" width="26"/>
                                <span class="ms-1">
                                    {{ "Download"|trans }}
                                </span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div style="height: 50%; width: 100%; background: #000; position: relative">
            <div style="position: absolute; left:32; bottom: 32; color: #fff;">
                MEGSTYL<br/>
                ul. Milenijna 10<br/>
                97-410 Żłobnica<br/>
                megstylpolska@gmail.com<br/>
                {{ "Poland"|trans }}
            </div>
            <div style="position: absolute; right: 48; bottom: 20; color: #fff; text-align: right;">
                <div>
                    <div style="letter-spacing: 4px; font-size: 26px;">
                        www.megstyl.pl
                    </div>
                </div>
            </div>
            <div style="position: absolute; right: 0; top: 0; height: 90%; width: 18px; background-color: #e42a46; border-radius: 0 0 0 20px"></div>
        </div>
    </div>
{% endif %}

</body>
</html>