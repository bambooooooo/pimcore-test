<html>
<head>
<style>
    .pb
    {
        page-break-after: always;
    }

    @page {
        size: A4;
        margin: -2mm;

        @bottom-right {
            content: counter(page) " / " counter(pages);
            font-size: 12px;
            color: #555;
        }

        @bottom-center {
            content: " ";
            border-top: 2px solid #cacaca;
            color: #cacaca;
        }
    }
</style>
</head>
<body>
<div class="page" style="position: relative">
    <img src="{{ group.Image.thumbnail("200x200") }}" style="display: block; width: 100%; height: 100%"/>
    <div style="position: absolute; right: 16px; bottom: 16px; font-weight: bold; font-size: 72px;">
        {{ group.key }}
    </div>
</div>

<div class="pb"></div>

<div class="page">
    {{ group.description|raw }}
</div>

<div class="pb"></div>

<h3>Products</h3>
<ol>
{% for product in group.Products %}

    <li>
        <img src="{{ product.Image.thumbnail("200x200") }}" />
        {{ product.key }}
    </li>

    {% for child in product.children %}

        <li>
            <img src="{{ child.Image.thumbnail("200x200")|raw }}" />
            {{ child.key }}
        </li>

    {% endfor %}

{% endfor %}

</ol>

<h3>Sets</h3>
<ol>
    {% for set in group.Sets %}
        {% if set.published %}
            <li>
                <img src="{{ set.Image.thumbnail("200x200")}}" />
                {{ set.key }}
            </li>
        {% endif %}
    {% endfor %}
</ol>

<h3>Additional products (in sets, but not in group)</h3>
<ol>
    {% for product in common %}
        {% if product.published %}
            <li>
                <img src="{{ product.Image.thumbnail("200x200") }}" />
                {{ product.key }}
            </li>
        {% endif %}
    {% endfor %}
</ol>

</body>
</html>